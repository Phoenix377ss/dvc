schema: '2.0'
stages:
  download_data:
    cmd: python .\src\data\data_download.py
    deps:
    - path: .\src\data\data_download.py
      hash: md5
      md5: 5ed402603d1e34391caf753ee6527457
      size: 918
    outs:
    - path: .\data\initial_data\initial_data.csv
      hash: md5
      md5: ed85bbc347b3746b553720ba54d6019c
      size: 93094
    - path: .\data\initial_data\target.csv
      hash: md5
      md5: 8dd4a468d94094f76af83d91a64a900e
      size: 2955
  prepocess_data:
    cmd: python .\src\data\data_prepare.py
    deps:
    - path: .\data\initial_data\initial_data.csv
      hash: md5
      md5: ed85bbc347b3746b553720ba54d6019c
      size: 93094
    - path: .\src\data\data_prepare.py
      hash: md5
      md5: a9783aec9f43af22dd6e372702ff4007
      size: 1634
    outs:
    - path: .\data\prepared_data\prepared_data.csv
      hash: md5
      md5: 1d45f7f73b5e9f034b0afa3901e73f3f
      size: 86383
  training:
    cmd: python .\src\train\training.py --config params.yaml
    deps:
    - path: .\configs\best_params.json
      hash: md5
      md5: 44d4b12d8c550e0dd8a4d16996941b55
      size: 257
    - path: .\data\initial_data\target.csv
      hash: md5
      md5: 8dd4a468d94094f76af83d91a64a900e
      size: 2955
    - path: .\data\prepared_data\prepared_data.csv
      hash: md5
      md5: 1d45f7f73b5e9f034b0afa3901e73f3f
      size: 86383
    - path: .\src\train\training.py
      hash: md5
      md5: 0b0000479bd925edd6c8b55b47c5bdc5
      size: 4255
    params:
      params.yaml:
        prepare.random_state: 42
        prepare.test_size: 0.7
        train.seed: 7
        train.test_size: 0.7
        train.val_size: 0.1
    outs:
    - path: .\models\best_model.pkl
      hash: md5
      md5: b12d372e41388c3ffddbff97c3970a8e
      size: 302927
    - path: metrics\metrics.json
      hash: md5
      md5: 760be4865bf6ea85f82e5d172b05279a
      size: 121
  tuning:
    cmd: python .\src\train\tuning.py --config params.yaml
    deps:
    - path: .\data\initial_data\target.csv
      hash: md5
      md5: 8dd4a468d94094f76af83d91a64a900e
      size: 2955
    - path: .\data\prepared_data\prepared_data.csv
      hash: md5
      md5: 1d45f7f73b5e9f034b0afa3901e73f3f
      size: 86383
    - path: .\src\train\tuning.py
      hash: md5
      md5: 6a1fa0db4bb5ccab48bfa6d6f892e6a6
      size: 4656
    params:
      params.yaml:
        tuning.n_trials: 20
        tuning.seed: 7
        tuning.val_size: 0.2
    outs:
    - path: .\configs\best_params.json
      hash: md5
      md5: 44d4b12d8c550e0dd8a4d16996941b55
      size: 257
